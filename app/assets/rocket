<!doctype html>
<html>
<head></head>
<body><canvas id="rocket" width="500" height="500"></canvas></body>
<script>
  // Cross browser setup for animation frame requests
  window.requestAnimFrame = (function(callback) {
    return window.requestAnimationFrame
      || window.webkitRequestAnimationFrame
      || window.mozRequestAnimationFrame
      || window.oRequestAnimationFrame
      || window.msRequestAnimationFrame
      || function(callback) { window.setTimeout(callback, 1000 / 60); }
  })();

  // Canvas and context
  var rocketCanvas = document.getElementById('rocket');
  var context = rocketCanvas.getContext('2d');

  // Called every frame
  function animate(frame) {
    // Clear canvas
    context.clearRect(0, 0, rocketCanvas.width, rocketCanvas.height);

    // Update fireBuffer
    var fireBuffer = (frame < 30) ? frame : -(frame - 60);

    // Colors for rocket
    var mainColor = '#333333';
    var glassColor = '#8888ff';
    var outerFireColor = '#bbbb44';
    var innerFireColor = '#bb4444';

    // Fire
    context.strokeStyle = outerFireColor;
    context.fillStyle = innerFireColor;
    context.lineWidth = 10;
    context.lineJoin = 'round';
    context.beginPath();
    // Set up below bottom left corner
    context.moveTo(250, 350);
    // Fire lines
    context.lineTo(330 - fireBuffer, 430 - fireBuffer);
    context.lineTo(300, 340);
    context.lineTo(450 + fireBuffer, 450 + fireBuffer);
    context.lineTo(340, 300);
    context.lineTo(430 - fireBuffer, 330 - fireBuffer);
    context.lineTo(350, 250);
    // Curve through bottom line of fuselage to fill fully on fire
    context.quadraticCurveTo(200, 200, 250, 350);
    context.closePath();
    context.stroke();
    context.fill();

    // Fuselage
    context.strokeStyle = mainColor;
    context.lineWidth = 20;
    context.lineJoin = 'miter';
    context.beginPath();
    context.moveTo(50, 50);
    // Left line
    context.quadraticCurveTo(100, 250, 250, 350);
    // Bottom line
    context.quadraticCurveTo(200, 200, 350, 250);
    // Right line
    context.quadraticCurveTo(250, 100, 50, 50);
    context.closePath();
    context.stroke();

    // Window
    context.fillStyle = glassColor;
    context.beginPath();
    context.arc(150, 150, 20, 0, 2 * Math.PI, false);
    context.closePath();
    context.stroke();
    context.fill();

    // Update frame count
    frame++;
    frame = (frame === 60) ? 0 : frame;

    // Request new animation frame
    requestAnimFrame(function() {
      animate(frame);
    });
  }

  // Get the animation going
  animate(0);

</script>
</html>
